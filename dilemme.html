<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jeu du pommier it√©r√©</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      max-width: 600px;
      margin: auto;
      background: #f4f4f4;
    }
    h1 {
      text-align: center;
    }
    button {
      font-size: 1.2em;
      margin: 0.5em;
      padding: 0.5em 1em;
    }
    .historique {
      margin-top: 2em;
      border-collapse: collapse;
      width: 100%;
    }
    .historique th, .historique td {
      border: 1px solid #aaa;
      padding: 0.5em;
      text-align: center;
    }
    .score {
      font-size: 1.2em;
      margin-top: 1em;
    }
  </style>
</head>
<body>

<h1>Jeu du Pommier It√©r√©</h1>

<p>Choisissez votre action :</p>
<button onclick="jouerUnTour('P')">ü§ù Partager</button>
<button onclick="jouerUnTour('G')">‚öîÔ∏è Garder</button>

<div class="score" id="tableauScores">Votre score : 0 | Score du bot : 0</div>

<table class="historique" id="tableHistorique">
  <thead>
    <tr>
      <th>Tour</th>
      <th>Vous</th>
      <th>Robot</th>
      <th>Scores (Vous, Robot)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  const gain = {
    'PP': [3, 3],
    'PG': [0, 5],
    'GP': [5, 0],
    'GG': [1, 1]
  };

  let historique = [];
  let scoreJoueur = 0;
  let scoreRobot = 0;

  function strategieRobot() {
    if (historique.length === 0) return 'P'; // Tit for Tat commence par coop√©rer
    return historique[historique.length - 1].joueur; // Imite le dernier coup du joueur
  }

  function jouerUnTour(coupJoueur) {
    const coupRobot = strategieRobot();
    const cl√© = coupJoueur + coupRobot;
    const [ptsJoueur, ptsRobot] = gain[cl√©];

    scoreJoueur += ptsJoueur;
    scoreRobot += ptsRobot;

    historique.push({ tour: historique.length + 1, joueur: coupJoueur, bot: coupRobot, ptsJoueur, ptsRobot });

    mettreAJourInterface();
  }

  function mettreAJourInterface() {
    const tableau = document.getElementById("tableHistorique").querySelector("tbody");
    tableau.innerHTML = "";

    historique.forEach(entree => {
      const ligne = `<tr>
        <td>${entree.tour}</td>
        <td>${entree.joueur}</td>
        <td>${entree.bot}</td>
        <td>${entree.ptsJoueur}, ${entree.ptsRobot}</td>
      </tr>`;
      tableau.innerHTML += ligne;
    });

    document.getElementById("tableauScores").textContent = `Votre score : ${scoreJoueur} | Score du bot : ${scoreRobot}`;
  }
</script>

</body>
</html>
